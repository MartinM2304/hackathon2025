#include <Adafruit_NeoPixel.h>

#define M1_A 4
#define M1_B 5  //PWM

#define M2_A 7
#define M2_B 6  //PWM

#define M3_A 8
#define M3_B 9  //PWM

#define M4_A 10  //PWM
#define M4_B 11  //PWM

#define PIN 3  
#define MATRIX_WIDTH 16
#define MATRIX_HEIGHT 16
#define NUM_PIXELS (MATRIX_WIDTH * MATRIX_HEIGHT)

Adafruit_NeoPixel matrix(64, 3, NEO_GRB + NEO_KHZ800);

typedef struct {
  uint8_t r;
  uint8_t g;
  uint8_t b;
} Pixel;

void setup() {

  Serial.begin(115200);

  matrix.begin();
  matrix.show();

  pinMode(M1_A, OUTPUT);
  pinMode(M1_B, OUTPUT);
  pinMode(M2_A, OUTPUT);
  pinMode(M2_B, OUTPUT);
  pinMode(M3_A, OUTPUT);
  pinMode(M3_B, OUTPUT);
  pinMode(M4_A, OUTPUT);
  pinMode(M4_B, OUTPUT);
}



int rusa = 52;
int emoji = 48;

Pixel angry[16][16] = {
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 200, 0, 0 }, { 200, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 200, 0, 0 }, { 200, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 200, 0, 0 }, { 200, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 200, 0, 0 }, { 200, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 200, 0, 0 }, { 200, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 200, 0, 0 }, { 200, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 0, 0 }, { 229, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } }
};


Pixel sad[16][16] = {
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } }
};

Pixel happy[16][16] = {
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } }
};

Pixel wow[16][16] = {
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 34, 177, 76 }, { 34, 177, 76 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } },
  { { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 229, 170, 122 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 } }
};

void sademoji() {
  for (int j = 0; j < 16; j++) {  // Cycle through colors
    for (int i = 0; i < 16; i++) {
      matrix.setPixelColor(j * 16 + i, sad[j][i].r, sad[j][i].g, sad[j][i].b);
    }
    matrix.show();
  }
}

void happyemoji() {
  for (int j = 0; j < 16; j++) {  
    for (int i = 0; i < 16; i++) {
      matrix.setPixelColor(j * 16 + i, happy[j][i].r, happy[j][i].g, happy[j][i].b);
    }
    matrix.show();
  }
}

void angryemoji() {
  for (int j = 0; j < 16; j++) {  
    for (int i = 0; i < 16; i++) {
      matrix.setPixelColor(j * 16 + i, angry[j][i].r, angry[j][i].g, angry[j][i].b);
    }
    matrix.show();
  }
}

void wowemoji() {
  for (int j = 0; j < 16; j++) {  
    for (int i = 0; i < 16; i++) {
      matrix.setPixelColor(j * 16 + i, wow[j][i].r, wow[j][i].g, wow[j][i].b);
    }
    matrix.show();
  }
}

void moveMotor(int pinA, int pinB, int speed) {
  if (speed > 255) speed = 255;
  if (speed < -255) speed = -255;

  if (speed > 0) {
    analogWrite(pinB, speed);
    digitalWrite(pinA, LOW);
  } else if (speed < 0) {
    analogWrite(pinB, 255 - abs(speed));
    digitalWrite(pinA, HIGH);
  } else {
    digitalWrite(pinA, LOW);
    digitalWrite(pinB, LOW);
  }
}
void moveMotor1(int speed) {
  moveMotor(M1_A, M1_B, speed);
}
void moveMotor2(int speed) {
  moveMotor(M2_A, M2_B, speed);
}
void moveMotor3(int speed) {
  moveMotor(M3_A, M3_B, speed);
}
void moveMotor4(int speed) {
  moveMotor(M4_A, M4_B, speed);
}

// Stop all motors
void stopMotors() {
  moveMotor1(0);
  moveMotor2(0);
  moveMotor3(0);
  moveMotor4(0);
}

void Forward() {
  moveMotor1(200);
  moveMotor2(200);
  moveMotor3(200);
  moveMotor4(200);
}

void Left() {
  moveMotor1(-200);
  moveMotor2(-200);
  moveMotor3(200);
  moveMotor4(200);
}

void Right() {
  moveMotor1(200);
  moveMotor2(200);
  moveMotor3(-200);
  moveMotor4(-200);
}

void Back() {
  moveMotor1(-200);
  moveMotor2(-200);
  moveMotor3(-200);
  moveMotor4(-200);
}


void loop() {

  for (int j = 0; j < 16; j++) {
    for (int i = 0; i < 16; i++) {
      matrix.setPixelColor(j * 16 + i, 255, 0, 0);
      matrix.show();
      delay(50);
    }
  }

  if (Serial.available() != 0) {
    Serial.println("Opaa slusham");
    emoji = Serial.parseInt();
    rusa = Serial.parseInt();
    Serial.println(rusa);
    Serial.println(emoji);
  }

  if (rusa == 0) {
    Forward();
    delay(340);
  }
  if (rusa == 1) {
    Back();
    delay(340);
  }
  if (rusa == 2) {
    Right();
    delay(340);
  }
  if (rusa == 3) {
    Left();
    delay(340);
  }
  if (rusa == 4) {
    stopMotors();
    delay(340);
  }

  // // emotikonkiiii

  if (rusa == 0) {
    for (int j = 0; j < 16; j++) {
      for (int i = 0; i < 16; i++) {
        matrix.setPixelColor(j * 16 + i,255, 0, 0);
      }
      matrix.show();
    }
  }
  if (rusa == 1) {
    for (int j = 0; j < 16; j++) {
      for (int i = 0; i < 16; i++) {
        matrix.setPixelColor(j * 16 + i, 0, 0, 255);
      }
      matrix.show();
    }
  }
  if (rusa == 2) {
    for (int j = 0; j < 16; j++) {
      for (int i = 0; i < 16; i++) {
        matrix.setPixelColor(j * 16 + i, (int)angry[j][i].r, (int)angry[j][i].g, (int)angry[j][i].b);
      }
      matrix.show();
    }
  }
  if (rusa == 3) {
    for (int j = 0; j < 16; j++) {
      for (int i = 0; i < 16; i++) {
        matrix.setPixelColor(j * 16 + i, (int)wow[j][i].r, (int)wow[j][i].g, (int)wow[j][i].b);
      }
      matrix.show();
    }
  }
  if (rusa == 4) {
    for (int i = 0; i < NUM_PIXELS; i++) {
      matrix.setPixelColor(i, 0, 0, 0);
    }
    matrix.show();
  }

  stopMotors();
  rusa = 4;
  delay(5);
}
